{% extends 'base.html' %}
{% load static %}

{% block title %}‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/orderstatus.css' %}">

<div class="order-container">
    <h1>‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h1>

    <!-- ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô -->
    {% if messages %}
    <div class="messages">
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }}">
            {{ message }}
        </div>
        {% endfor %}
    </div>
    {% endif %}

    {% if orders %}
    <table class="table">
        <thead>
            <tr>
                <th>üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</th>
                <th>üìÜ ‡∏ß‡∏±‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                <th>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°</th>
                <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                <th>‡∏ß‡∏¥‡∏ò‡∏µ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</th>
            </tr>
        </thead>
        <tbody>
            {% for order in orders %}
            <tr>
                <td>{{ order.created_at|date:"Y-m-d H:i" }}</td>
                <td>
                    {% if order.pickup_time %}
                        {{ order.pickup_time|date:"Y-m-d H:i" }}
                    {% else %}
                        <span class="text-muted">‚ùå ‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏</span>
                    {% endif %}
                </td>
                <td>{{ order.total_price }} ‡∏ö‡∏≤‡∏ó</td>
                <td>
                    {% if order.status == "preparing" %}
                        <span class="badge bg-warning">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</span>
                    {% elif order.status == "ready" %}
                        <span class="badge bg-info">‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</span>
                    {% elif order.status == "completed" %}
                        <span class="badge bg-success">‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</span>
                    {% elif order.status == "cancelled" %}
                        <span class="badge bg-danger">‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</span>
                    {% endif %}
                </td>
                <td>
                    {% if order.payment_method == "cash" %}
                        üíµ ‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î
                    {% elif order.payment_method == "transfer" %}
                        üí≥ ‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô
                        {% if order.slip_image %}
                            <a href="{{ order.slip_image.url }}" target="_blank" class="slip-link">üìÑ ‡∏î‡∏π‡∏™‡∏•‡∏¥‡∏õ</a>
                        {% else %}
                            <span class="text-muted">‚ùå ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏•‡∏¥‡∏õ</span>
                        {% endif %}
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p class="empty-cart">üõí ‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</p>
    {% endif %}

    <a href="{% url 'home' %}" class="btn-primary">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</a>
</div>
{% endblock %}